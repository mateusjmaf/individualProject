<div class="centerIcon">
	<span class="glyphicon glyphicon-usd"></span>
</div>
<br />
<div class="row forms">
	<div class="col-xs-12">
		<form class="form-horizontal form-group">
			<div class="row">
			
				<div class="col-xs-12 col-md-6">
					<div class="row">
						<label class="control-label col-xs-4">Tipo de Transação:</label>
						<div class="col-xs-8">
							<label class="radio-inline">
								<input 
									name="transactionType"
									type="radio" 
									value="Saída"
									[(ngModel)]="flow.tipoMovimento">
									Saída
							</label>
							<label class="radio-inline">
								<input 
									name="transactionType" 
									type="radio" 
									value="Entrada" 
									[(ngModel)]="flow.tipoMovimento">
										Entrada
							</label>
						</div>
						
					</div>
				</div>
				
				<div class="col-xs-12 col-md-6">
					<div class="row">
							
						<ng-container
								*ngIf="flow.tipoMovimento == 'outflow'; then outflow; else inflow">
							</ng-container>

							<ng-template #outflow>
								<label class="control-label col-xs-4">Descricação de custos:</label>
								<div class="col-xs-5">
									<select 
										class="form-control inputTriumphi" 
										name="costDescription">
											<option>Selecionar
									</select>
								</div>
								
								<div class="col-xs-2">			
									<button 
										type="button" 
										class="btn btnTriumphi glyphicon glyphicon-plus"
										(click)="addCategoria()">
									</button>
								</div>
							</ng-template>

							<ng-template #inflow>
								<label class="control-label col-xs-4">Ordem | Cliente:</label>
								<div class="col-xs-8">
									<div class="input-group">
										<span class="input-group-addon">{{ reserveOrder }}</span>
										<input 
											#reservePicked
											aria-label="Amount (to the nearest dollar)"
											class="form-control"
											name="reserveClient"
											type="text" 
											[(ngModel)]="clientName">
										<span class="input-group-btn">
											<button 
												class="btn btnTriumphi" 
												type="button"
												(click)="getReserves()">
													<span class="glyphicon glyphicon-search"></span>
											</button>
										</span>
									</div>
								</div>
							</ng-template>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-xs-12 col-md-6">
					<div class="form-group">
						<label class="control-label col-xs-4">Forma de Pagamento:</label>
						<div class="col-xs-8">
							<select 
								class="form-control inputTriumphi"
								name="formPyment">
									<option>Dinheiro
									<option>Cartão Débito
									<option>Cartão Crédito
									<option>Cheque
							</select>
						</div>
					</div>
				</div>
				
				<div class="col-xs-12 col-md-6">
					<div class="form-group">
						<label class="control-label col-xs-4">N° Parcelas:</label>
						<div class="col-xs-8">
							<select 
								class="form-control inputTriumphi" 
								name="installmentNumber">
									<option>1x
									<option>2x
									<option>3x
									<option>4x
									<option>5x
									<option>6x
									<option>7x
									<option>8x
									<option>9x
									<option>10x
							</select>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-xs-12 col-md-6">	
					<div class="form-group">
						<label class="control-label col-xs-4">Valor:</label>
						<div class="col-xs-8">
							<input 
								class="form-control inputTriumphi"  
								type="number" 
								name="flowValue"
								[(ngModel)]="flow.valor">
						</div>
					</div>
				</div>
				
				<div class="col-xs-12 col-md-6">	
					<div class="form-group">
						<label class="control-label col-xs-4">Data</label>
						<div class="col-xs-8">
							<input 
								class="form-control inputTriumphi"  
								type="date" 
								name="flowDate"
								[(ngModel)]="flow.dataMovimento">
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-xs-12 col-md-6">
					<div class="div-form form-group cheque hide">
						<div class="col-xs-6 col-md-4">
							<label class="control-label">Nº Cheque</label>
								<input 
									class="form-control inputTriumphi"  
									name="checkNumber">
						</div>
						<div class="col-xs-6 col-md-4">
							<label class="control-label">Agência</label>	
								<input 
									class="form-control inputTriumphi"
									name="agency">
						</div>
						<div class="col-xs-6 col-md-4">
							<label class="control-label">Conta Corrente</label>
								<input 
									class="form-control inputTriumphi"
									name="currentAccount">
						</div>
						<div class="col-xs-6 col-md-4">
							<label class="control-label">Banco</label>	
								<input 
									class="form-control" inputTriumphi
									name="bank">
						</div>
					</div>
				</div>
				
				
			</div>
			<div class="row">
				<div class="footerFormSubmit">		
					<button 
						type="button" 
						class="btn btn-default glyphicon glyphicon-remove btnSecondary" 
						(click)="resetForm()">
					</button>
					<button 
						type="button" 
						class="btn btn-default glyphicon glyphicon-ok btnPrimary"
						(click)="onSubmit()">
					</button>
				</div>
			</div>
		</form>		
	</div>
</div>

<br>

<div class="row forms">
	<div class="col-xs-6 col-xs-offset-1">
		<div class="row">
			<label class="control-label col-xs-1">
				<span class="glyphicon glyphicon-filter">
				</span>
			</label>
			<div class="col-xs-11">
				<label class="radio-inline">
					<input 
						type="radio" 
						value="outflow"
						(change)="searchFlow()"
						[(ngModel)]="reserveSearchValue">
					Saída
				</label>
				<label class="radio-inline">
					<input 
						type="radio"
						value="inflow"
						(change)="searchFlow()"
						[(ngModel)]="reserveSearchValue">
					Entrada
				</label>
				<label class="radio-inline">
					<input 
						selected
						type="radio"
						value="null"
						(change)="searchFlow()"
						[(ngModel)]="reserveSearchValue">
					Ambos
				</label>
			</div>
		</div>
	</div>

	<br>
	
	<div class="row">
		<div>
			<table class="table table-hover tableDisplay">

				<tr class="tableHeader">
					<th>TIPO</th>
					<th>DATA</th>
					<th>FORMA DE PAGAMENTO</th>
					<th class="tableEditColumn">AÇÕES</th>
				</tr>

				<ng-container
					*ngIf="flowList; then searchSuccess; else searchFail">
				</ng-container>
				
				<ng-template #searchSuccess>
					<tr *ngFor="let flow of flowList, let i = index">
						<td>{{ flow.tipoMovimento }}</td>
						<td>{{ flow.dataRegistro | date: 'M/d/yy, h:mm a' }}</td>
						<td>{{ flow.formaPagamento }}</td>
						<td class="tableEditColumn tableEditColumnIcon">
							<a class="tableEditColumnIcon" (click)="deleteFlow(flow.idMovimento)">
								<span class="glyphicon glyphicon-trash"></span>
							</a>
							<a class="tableEditColumnIcon" (click)="editFlow(flow)">
								<span class="glyphicon glyphicon-edit"></span>
							</a>
						</td>
					</tr>
				</ng-template>

			</table>

			<ng-template #searchFail>
				<div class="noData">
					Desculpe, nenhum resultado encontrado.
				</div>
			</ng-template>
		</div>
	</div>	
</div>

<modal-component 
	#modalReserve 
	[title]="titleReserves"
	[primary-action]="primaryActionReserve">
	<div class="app-modal-body">
		<table class="table table-hover tableDisplay">
			<tr class="tableHeader">
				<th></th>
				<th>ORDEM</th>
				<th>CLIENTE</th>
			</tr>

			<ng-container
				*ngIf="reserveList; then searchReserveSuccess; else searchReserveFail">
			</ng-container>
				
			<ng-template #searchReserveSuccess>
				<tr *ngFor="let reserve of reserveList, let i = index">
					<td>
						<input
							type="radio" 
							name="reserveChecked"
							[value]="i+'cc'"
							(change)="onReserveChange(reserve)">
					</td>
					<td>{{ reserve.idReserva }}</td>
					<td>{{ reserve.cliente.nome }}</td>
				</tr>
			</ng-template>
		</table>
			
		<ng-template #searchReserveFail>
			<div class="noData">
				Desculpe, nenhum resultado encontrado.
			</div>
		</ng-template>
	</div>
</modal-component>